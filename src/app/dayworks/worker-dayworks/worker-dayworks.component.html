<div class="row">
  <table class="table table-bordered">
    <thead class="text-center text-secondary bg-light">
      <tr>
        <th scope="col">Mon</th>
        <th scope="col">Tue</th>
        <th scope="col">Wed</th>
        <th scope="col">Thu</th>
        <th scope="col">Fri</th>
        <th scope="col">Sat</th>
        <th scope="col">Sun</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td [ngbPopover]="popContent" #popOver="ngbPopover" [popoverTitle]="popTitle" triggers="dblclick"
            class="text-center pt-0" style="width:14%"
            [ngClass]="{'bg-warning': dateRange.isTodayInRange && dateRange.days()[dayIndex] === dateRange.today}"
            *ngFor="let dw of dayworks?.slice(0,7) let dayIndex=index"
            (click)="onDayworkClick(dayIndex)"
            (dblclick)="onDayworkDoubleClick(dayIndex)">
          <div class="float-end">{{dateRange.days()[dayIndex]}}</div>
          <div class="mt-4" *ngIf="dw.status else placeholderIcon">
            <i class="bi bi-check-circle text-success"></i>
          </div>
          <div class="float-end" *ngIf="dw.status && dw.diffHours">{{dw.diffHours}}h</div>
        </td>
      </tr>
      <tr>
        <td [ngbPopover]="popContent" #popOver="ngbPopover" [popoverTitle]="popTitle" triggers="dblclick"
            class="text-center pt-0"
            [ngClass]="{'bg-warning': dateRange.isTodayInRange && dateRange.days()[7+dayIndex] === dateRange.today}"
            *ngFor="let dw of dayworks?.slice(7,14) let dayIndex=index"
            (click)="onDayworkClick(dayIndex+7)"
            (dblclick)="onDayworkDoubleClick(dayIndex+7)">
          <div class="float-end">{{dateRange.days()[7+dayIndex]}}</div>
          <div class="mt-4" *ngIf="dw.status else placeholderIcon">
            <i class="bi bi-check-circle text-success"></i>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<div class="clearfix">
  <div class="float-end text-muted">
  Total: {{totalDays}}d<span *ngIf="hours !== 0"> {{hours}}h</span>
  </div>
</div>

<ng-template #placeholderIcon>
  <div class="mt-4">
    <i class="bi bi-plus text-white"></i>
  </div>
</ng-template>

<!-- Popover template -->

<ng-template #popTitle>
  Part-time Setup
  <div class="float-end" (click)="onPopoverClose()">
    <i class="bi bi-x-lg"></i>
  </div>
</ng-template>

<ng-template #popContent>
  <h2>{{selectedDate.toDateString()}}</h2>
  <p>Setup additional hours.</p>
  <app-number-picker #hours></app-number-picker>
</ng-template>


